import base64
import html2text


content = ['Delivered-To: malunthakesr@gmail.com', 'Received: by 2002:a9f:3e89:0:0:0:0:0 with SMTP id x9csp718104uai;', 'Thu, 31 Oct 2019 01:42:12 -0700 (PDT)', 'X-Received: by 2002:a17:902:8305:: with SMTP id bd5mr5116753plb.184.1572511331912;', '        Thu, 31 Oct 2019 01:42:11 -0700 (PDT)', 'ARC-Seal: i=1; a=rsa-sha256; t=1572511331; cv=none;', '        d=google.com; s=arc-20160816;', '        b=xStylp2v5bdG7jNP5YI2SesJH94/r86po8dnCLndB4r2BI9qzkABJEAYFGqCPBkr/B', '         90zEr3wZ+vokARIIrFuiwbsCK8kKv6qF+Z4+GSehFuSzMh5IHBbPu/j0eiWfJ/HRUxtc', '    zHC6wewRDSwRZPF3+Ro+sGQRcFSkgTPFKnZCkKxol2lvvpnXfoN3ct8/X85j7NnaOB1M', '      dLRjxh3QO9JCcCKWNdzx8BimBthnFEPTl2IzBSva3K4kNw6xcm+d5xRIc2LRXuY1ZGTf', '         oxZVb2pSpiikipQ0dhgwLstY5RFh/DmocvgeOahJ08k5qQL2lAg2NvwFH6I0KCx+gYyP', '         ATqg==', 'ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;', '        h=to:from:subject:date:mime-version:message-id:dkim-signature;', '        bh=DjKMZ1OniTNP2YsDJ/OH6yS51DMP7p43hwdu719hynI=;', '        b=x4l3mKiRfgJwJ/jBF/rDOU5s/cQuhMti+hTLq95J+0K8p/G5cojKqSUDVcC/VcjD6m', '         U9EmYlggnEBdnj3BIYACwV/Rk73ifCprUrfM9j63uYkY42w1JDPDn6bdDZFIW3zDUyTl', '         hmi3UIfTz7Mwo0aCQLRiHoIQK9xMjgUpNsbmDya/0ruAYo72o+9XG29AwurRBm1EITo5', '         0UyWkyTqQ3QZgL25Ka30MOQ44bCqejL4Ibp6V1pVU8XJND3yOw9E0ddL8ozIKseWn1ty', '         tKemIn2lFwHQ5BPQpViPbyQaYncOaFflReWdhDmr7c50Bg1iNtYvV4kQPIVCfQnZv5I/', '         ++aA==', 'ARC-Authentication-Results: i=1; mx.google.com;', '       dkim=pass header.i=@gmail.com header.s=20161025 header.b=LR9lmW+f;', '       spf=pass (google.com: domain of rama92.ayodhya@gmail.com designates 209.85.220.65 as permitted sender) smtp.mailfrom=rama92.ayodhya@gmail.com;', '       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com', 'Return-Path: <rama92.ayodhya@gmail.com>', 'Received: from mail-sor-f65.google.com (mail-sor-f65.google.com. [209.85.220.65])', '        by mx.google.com with SMTPS id v10sor5662940pfn.58.2019.10.31.01.42.11', '        for <malunthakesr@gmail.com>', '        (Google Transport Security);', '        Thu, 31 Oct 2019 01:42:11 -0700 (PDT)', 'Received-SPF: pass (google.com: domain of rama92.ayodhya@gmail.com designates 209.85.220.65 as permitted sender) client-ip=209.85.220.65;', 'Authentication-Results: mx.google.com;', '       dkim=pass header.i=@gmail.com header.s=20161025 header.b=LR9lmW+f;', '       spf=pass (google.com: domain of rama92.ayodhya@gmail.com designates 209.85.220.65 as permitted sender) smtp.mailfrom=rama92.ayodhya@gmail.com;', '       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com', 'DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;', '        d=gmail.com; s=20161025;', '        h=message-id:mime-version:date:subject:from:to;', '        bh=DjKMZ1OniTNP2YsDJ/OH6yS51DMP7p43hwdu719hynI=;', '        b=LR9lmW+fu9q5kV65ky2enzVXTk2lwGgMLoXDMl5rekZDBTZojCfhKczbxkND8cvlVL', '         JRw9KacANX7dWUqXBcJd8RxOW00YNHTQqGU4+aFIAC1VkSjgNi+LDhzYwUnc0apjiKCC', '         1prR1eKWi2mVOpdjJjL+K0Ox1ZlYUaBnKZhGV1sBL5B3unHMElwD96HTajYg9o/1/zCv', '         ZRL1s8uNFOVdjiMkEVbzzasHaH0GQ8Wt4UVqMOCN+ilvk0TYTKVDk9M+l+5bc39pSfKB', '         p8e92jNmuNPoaBt3uT1SIogkNfnNwrcvLEqRiRLp+JEK8zM2KHCf9d89xjkHQq6Fgadt', '         v9VA==', 'X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;', '        d=1e100.net; s=20161025;', '        h=x-gm-message-state:message-id:mime-version:date:subject:from:to;', '        bh=DjKMZ1OniTNP2YsDJ/OH6yS51DMP7p43hwdu719hynI=;', '        b=siZd5s6kdKmkvVkWhUOTSof5kiTvNd+YGo7NImwjn9zqOYN/Op5iyXokcsPbmrw/WE', '         PxmLCnIQuC83WLOXxKDa9AnexTP+vQ38ux0jxLaA3xVjy7o00w/zL+wwZIREFdvwWX5t', '         ggyvvi7VRL80g6BgEmUcUuzDcjrhDO0WpEhqgnCacaon5f5U5QnYvnCG9FZT+8bbE+Vk', '         8n6MSCiTsVKCLbBNybpfpNvqdCTDpkPuG6V0F3z9eb/kFkiAwYENezTOzY4U9RomVpVR', '         SsDbpz3DKMCOrcvvICgrWXLoXHRaM8JgDbvt9jKKPhsrPoxSUk4CXFTDwMVmTGfj3Xqs', '         Y/VQ==', 'X-Gm-Message-State: APjAAAUGpl0eC00Z6E40F8taL1KJWddhFUISe8+t+V3hQO7ANQPtYo6b', '\t6aLM56xMludnESBINS9dnx1bXkr5dsw=', 'X-Google-Smtp-Source: APXvYqwmOqcNn9GBs/r1p9ONPwhUZUF5IFsC52oGpWwZs+QVjAc7XbDgBRL+rvMXiUmXfR5PSOETkw==', 'X-Received: by 2002:a62:e319:: with SMTP id g25mr5132538pfh.146.1572511331399;', '        Thu, 31 Oct 2019 01:42:11 -0700 (PDT)', 'Return-Path: <rama92.ayodhya@gmail.com>', 'Received: from [169.254.78.35] ([2405:9800:bc20:85d5:39da:5016:6e20:b471])', '        by smtp.gmail.com with ESMTPSA id 137sm2258459pfu.173.2019.10.31.01.42.09', '        for <malunthakesr@gmail.com>', '        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);', '        Thu, 31 Oct 2019 01:42:10 -0700 (PDT)', 'Message-ID: <5dba9e62.1c69fb81.4807e.57cf@mx.google.com>', 'Content-Type: multipart/mixed; boundary="===============0836677121684327172=="', 'MIME-Version: 1.0', 'Date: Thu, 31 Oct 2019 08:42:09 -0000', 'Subject: Meeting urgent', 'From: "rama92.ayodhya@gmail.com" <rama92.ayodhya@gmail.com>', 'To: malunthakesr@gmail.com', '', '--===============0836677121684327172==', 'Content-Type: multipart/alternative; boundary="===============8076736240790520203=="', 'MIME-Version: 1.0', '', '--===============8076736240790520203==', 'Content-Type: text/plain; charset="utf-8"', 'MIME-Version: 1.0', 'Content-Transfer-Encoding: base64', '', 'SSBoYXZlIHdyb3RlIHRoaXMgZW1haWwgZm9yIHRlc3RpbmcgR21haWwgc3J2aWNlcyEKWWFnbWFp', 'bCBpcyBhbiBpbnN0YW50IHNlcnZpY2Ugb2YgR21ha', 'PGRpdj5JIGhhdmUgd3JvdGUgdGhpcyBlbWFpbCBmb3IgdGVzdGluZyBHbWFpbCBzcnZpY2VzITwv', 'ZGl2PjxkaXY+WWFnbWFpbCBpcyBhbiBpbnN0YW50IHNlcnZpY2Ugb2YgR21haWwuLi48L2Rpdj48', 'ZGl2PkkgaGF2ZSB3cm90ZSB0aGlzIGVtYWlsIGZvciB0ZXN0aW5nIEdtYWlsIHNydmljZXMhPC9k', 'aXY+PGRpdj5JIGhhdmUgd3JvdGUgdGhpcyBlbWFpbCBmb3IgdGVzdGluZyBHbWFpbCBzcnZpY2Vz', 'ITwvZGl2PjxkaXY+SSBoYXZlIHdyb3RlIHRoaXMgZW1haWwgZm9yIHRlc3RpbmcgR21haWwgc3J2', 'aWNlcyE8L2Rpdj48ZGl2PkkgaGF2ZSB3cm90ZSB0aGlzIGVtYWlsIGZvciB0ZXN0aW5nIEdtYWls', 'IHNydmljZXMhPC9kaXY+PGRpdj5ZYWdtYWlsIGlzIGFuIGluc3RhbnQgc2VydmljZSBvZiBHbWFp', 'bC4uLjwvZGl2PjxkaXY+WWFnbWFpbCBpcyBhbiBpbnN0YW50IHNlcnZpY2Ugb2YgR21haWwuLi48', 'L2Rpdj48ZGl2PllhZ21haWwgaXMgYW4gaW5zdGFudCBzZXJ2aWNlIG9mIEdtYWlsLi4uPC9kaXY+', 'PGRpdj5ZYWdtYWlsIGlzIGFuIGluc3RhbnQgc2VydmljZSBvZiBHbWFpbC4uLjwvZGl2Pg==', '', '--===============7824326373479527661==--', '', '--===============8076736240790520203==--', '', '--===============0836677121684327172==--']

start_idx = 0
end_idx = 0
catching = False
h2t = html2text.HTML2Text()
raw_body = ''

for i, line in enumerate(content):
    if 'base64' in line:
        catching = True
        continue

    if catching:
        try:
            raw_body += base64.b64decode(line).decode('utf-8')
        except:
            continue

decoded_text = h2t.handle(raw_body).split('\n')
complete_text = '\n'.join([t for t in decoded_text if len(t) > 0])

print(complete_text)
# return complete_text
